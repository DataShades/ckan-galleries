{% set stats = h.get_site_statistics() %}

<div class="box stats">
  <div class="inner">
    <h3>{{ _('{0} statistics').format(g.site_title) }}</h3>
    <table>
      <tr>
        <td>
          <a href="{{ h.url_for(controller='ckanext.dfmp.controller:DFMPController', action='search_assets') }}">
            <span class="number"><span>{{ h.dfmp_total_ammount_of_assets() }}</span></span>
            <span class="stat-type-name">{{ _('assets') }}</span>
          </a>
        </td>
        <td>
          <a href="{{ h.url_for(controller='package', action='search') }}">
            <span class="number"><span>{{ h.dfmp_total_ammount_of_datasets() }}</span></span>
            <span class="stat-type-name">{{ _('dataset') if stats.dataset_count == 1 else _('datasets') }}</span>
          </a>
        </td>
        <td>
          <a href="{{ h.url_for(controller='organization', action='index') }}">
            <span class="number">{{ h.SI_number_span(stats.organization_count) }}</span>
            <span class="stat-type-name">{{ _('organization') if stats.organization_count == 1 else _('organizations') }}</span>
          </a>
        </td>
        <td>
          <a href="{{ h.url_for(controller='related', action='dashboard') }}">
            <span class="number">{{ h.SI_number_span(stats.related_count) }}</span>
            <span class="stat-type-name">{{ _('related item') if stats.related_count == 1 else _('related items') }}</span>
          </a>
        </td>
      </tr>
    </table>
  </div>
</div>
